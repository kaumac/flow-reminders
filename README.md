# Flow Reminders App

This is a monorepo containing the Flow Reminders application, consisting of a **Next.js frontend** and a **FastAPI (Python) backend**.

## Prerequisites

Before getting started, ensure you have the following installed on your machine:

-   **Node.js** (Latest LTS recommended) & **npm**
-   **Python 3.10+** (Ensure `python3` and `pip` are available)
-   **Git**

## Project Structure

-   `apps/app`: Next.js Frontend Application
-   `apps/api`: FastAPI Backend Service with Scheduling

## Getting Started

### 1. Clone the Repository

```bash
git clone git@github.com:kaumac/flow-reminders.git
cd flow-reminders
```

### 2. Install Dependencies (Root)

Install the Node.js dependencies for the monorepo:

```bash
npm install
```

---

## ‚öôÔ∏è Backend Setup (`apps/api`)

The backend handles the business logic, database, and integration with Vapi.

### 1. Set up Python Environment

Navigate to the API directory and set up a virtual environment:

```bash
cd apps/api
python3 -m venv venv
```

Activate the virtual environment:

-   **Mac/Linux**:
    ```bash
    source venv/bin/activate
    ```
-   **Windows**:
    ```bash
    .\venv\Scripts\activate
    ```

### 2. Install Python Dependencies

```bash
pip install -r requirements.txt
```

### 3. Environment Configuration

Copy the example environment file:

```bash
cp .env.example .env.local
```

Open `.env.local` and add your Vapi credentials:

```ini
VAPI_API_KEY=your_vapi_private_api_key
VAPI_PHONE_NUMBER_ID=your_vapi_phone_number_id
VAPI_PHONE_NUMBER_ID=your_vapi_phone_number_id
VAPI_ASSISTANT_ID=your_vapi_assistant_id
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
```

> **Note**: You can get these keys from your [Vapi Dashboard](https://dashboard.vapi.ai/).
>
> **CORS Configuration**: The `CORS_ORIGINS` variable defines which frontend URLs are allowed to access the API. It accepts a comma-separated list of origins. Ensure this includes your frontend's URL (e.g., `http://localhost:3000` for local development).

---

## üñ•Ô∏è Frontend Setup (`apps/app`)

The frontend is built with Next.js and Shadcn UI.

### 1. Environment Configuration

Navigate to the app directory:

```bash
cd ../app  # from apps/api
# or cd apps/app from root
```

Copy the example environment file:

```bash
cp .env.example .env.local
```

Ensure `NEXT_PUBLIC_API_URL` points to your backend (default is `http://localhost:8000`):

```ini
NEXT_PUBLIC_API_URL=http://localhost:8000
```

---

## üöÄ Running the Application

You can run the entire stack from the root using Turbo, or run services individually.

### Option A: Run All Services (Recommended)

From the **root** of the monorepo:

```bash
npm run dev
```

This will start:
-   **Frontend**: [http://localhost:3000](http://localhost:3000)
-   **Backend**: [http://localhost:8000](http://localhost:8000) (Docs at [/docs](http://localhost:8000/docs))

### Option B: Run Individually

**Backend Only:**
```bash
cd apps/api
source venv/bin/activate
uvicorn main:app --reload --port 8000
```

**Frontend Only:**
```bash
cd apps/app
npm run dev
```

---

## üìû Vapi Integration & Webhooks

Crucial steps to make the AI calling functionality work.

### 1. Webhook Configuration (Vapi Dashboard)

For the Vapi AI to communicate with your backend (e.g., to report call status or fetch instructions), you must configure the **Server URL** in the Vapi Dashboard.

1.  Go to the **Phone Numbers** section in the Vapi Dashboard.
2.  Select your phone number.
3.  Find the **Server URL** (sometimes labeled as "Callback URL" or "Webhook URL").
4.  Set this to your backend's public URL.

### 2. Local Development (Exposing Localhost)

Since Vapi needs to hit your local backend API, you must expose your local server (`http://localhost:8000`) to the internet using a tunneling service.

We recommend reading the official guide:
üëâ **[Vapi Helper: Developing Locally](https://docs.vapi.ai/server-url/developing-locally)**

**Quick Example using ngrok:**

1.  Install ngrok.
2.  Run the tunnel on port 8000:
    ```bash
    ngrok http 8000
    ```
3.  Copy the HTTPS URL generated by ngrok (e.g., `https://random-id.ngrok-free.app`).
4.  Paste this URL into the **Server URL** field in your Vapi Phone Number settings.
